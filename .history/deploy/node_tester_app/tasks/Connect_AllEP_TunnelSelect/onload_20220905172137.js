"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TaskMain = void 0;
const testRunner_1 = require("./testRunner");
const labAgent_1 = require("./labAgent");
const BDTAction = __importStar(require("./bdtAction"));
const agentManager_1 = require("./agentManager");
async function TaskMain(_interface) {
    //(1) 连接测试节点
    let agentManager = agentManager_1.AgentManager.createInstance(_interface);
    await agentManager.initAgentList(labAgent_1.labAgent);
    //(2) 创建测试用例执行器 TestRunner
    let testRunner = new testRunner_1.TestRunner(_interface);
    let testcaseName = "Connect_AllEP_TunnelSelect";
    let testcase = {
        TestcaseName: testcaseName,
        testcaseId: `${testcaseName}_${Date.now()}`,
        remark: `# 操作流程：\n
        + （1）LN/RN 初始化本地BDT协议栈
        + （2）LN 向 RN 发起首次连接，发送10M大小stream 数据，关闭连接
        + （3）LN 向 RN 发起二次连接，发送10M大小stream 数据，关闭连接
        + （4）RN 向 LN 发起反向连接，发送10M大小stream 数据，关闭连接
        +  (5) 关闭所有连接 `,
        environment: "lab",
    };
    await testRunner.initTestcase(testcase);
    //(3) 创建BDT测试客户端
    let config = {
        eps: {
            ipv4: {
                udp: true,
                tcp: true,
            },
            ipv6: {
                udp: true,
                tcp: true,
            }
        },
        logType: "info",
        SN: labAgent_1.LabSnList,
        resp_ep_type: "SN_Resp" /* SN_Resp */,
    };
    // 每台机器运行一个bdt 客户端
    await agentManager.allAgentStartBdtPeer(config);
    //(4) 测试用例执行器添加测试任务
    for (let i in labAgent_1.labAgent) {
        for (let j in labAgent_1.labAgent) {
            if (i != j && labAgent_1.labAgent[i].NAT + labAgent_1.labAgent[j].NAT < 5) {
                let info = await testRunner.createPrevTask({
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    timeout: 5 * 30 * 1000,
                    action: []
                });
                info = await testRunner.prevTaskAddAction(new BDTAction.ConnectAction({
                    type: "connect" /* connect */,
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    config: {
                        conn_tag: "connect_1",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.SendStreamAction({
                    type: "send-stream" /* send_stream */,
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    fileSize: 10 * 1024 * 1024,
                    config: {
                        conn_tag: "connect_1",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.SendStreamAction({
                    type: "send-stream-reverse" /* send_stream_reverse */,
                    LN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    fileSize: 10 * 1024 * 1024,
                    config: {
                        conn_tag: "connect_1",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                // info = await testRunner.prevTaskAddAction(new BDTAction.CloseConnectAction({
                //     type: "close-connect" /* close_connect */,
                //     LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                //     config: {
                //         conn_tag: "connect_1",
                //         timeout: 30 * 1000,
                //     },
                //     expect: { err: 0 },
                // }));
                info = await testRunner.prevTaskAddAction(new BDTAction.ConnectAction({
                    type: "connect-second" /* connect_second */,
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    config: {
                        conn_tag: "connect_2",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.SendStreamAction({
                    type: "send-stream" /* send_stream */,
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    fileSize: 10 * 1024 * 1024,
                    config: {
                        conn_tag: "connect_2",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.SendStreamAction({
                    type: "send-stream-reverse" /* send_stream_reverse */,
                    LN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    fileSize: 10 * 1024 * 1024,
                    config: {
                        conn_tag: "connect_2",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.CloseConnectAction({
                    type: "close-connect" /* close_connect */,
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    config: {
                        conn_tag: "connect_2",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.ConnectAction({
                    type: "connect-reverse" /* connect_reverse */,
                    LN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    config: {
                        conn_tag: "connect_3",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.SendStreamAction({
                    type: "send-stream" /* send_stream */,
                    LN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    fileSize: 10 * 1024 * 1024,
                    config: {
                        conn_tag: "connect_3",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.SendStreamAction({
                    type: "send-stream-reverse" /* send_stream_reverse */,
                    LN: `${labAgent_1.labAgent[i].tags[0]}$1`,
                    RN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    fileSize: 10 * 1024 * 1024,
                    config: {
                        conn_tag: "connect_3",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                info = await testRunner.prevTaskAddAction(new BDTAction.CloseConnectAction({
                    type: "close-connect" /* close_connect */,
                    LN: `${labAgent_1.labAgent[j].tags[0]}$1`,
                    config: {
                        conn_tag: "connect_3",
                        timeout: 30 * 1000,
                    },
                    expect: { err: 0 },
                }));
                await testRunner.prevTaskRun();
            }
        }
    }
    await testRunner.waitFinished();
}
exports.TaskMain = TaskMain;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ub2RlLXRlc3Rlci1hcHAvdGFza3NfYmR0X2JldGEvQ29ubmVjdF9BbGxFUF9UdW5uZWxTZWxlY3Qvb25sb2FkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxvRUFBK0Q7QUFFL0QsZ0VBQXdGO0FBQ3hGLDhFQUFnRTtBQUNoRSx3RUFBa0U7QUFFM0QsS0FBSyxVQUFVLFFBQVEsQ0FBQyxVQUErQjtJQUMxRCxZQUFZO0lBQ1osSUFBSSxZQUFZLEdBQUcsMkJBQVksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDM0QsTUFBTSxZQUFZLENBQUMsYUFBYSxDQUFDLG1CQUFRLENBQUMsQ0FBQztJQUMzQywwQkFBMEI7SUFDMUIsSUFBSSxVQUFVLEdBQUcsSUFBSSx1QkFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzVDLElBQUksWUFBWSxHQUFHLDRCQUE0QixDQUFBO0lBQy9DLElBQUksUUFBUSxHQUFZO1FBQ3BCLFlBQVksRUFBRSxZQUFZO1FBQzFCLFVBQVUsRUFBRSxHQUFHLFlBQVksSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFDM0MsTUFBTSxFQUFFOzs7Ozt1QkFLTztRQUNmLFdBQVcsRUFBRSxLQUFLO0tBQ3JCLENBQUM7SUFDRixNQUFNLFVBQVUsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDeEMsZ0JBQWdCO0lBQ2hCLElBQUksTUFBTSxHQUF5QjtRQUMzQixHQUFHLEVBQUM7WUFDQSxJQUFJLEVBQUM7Z0JBQ0QsR0FBRyxFQUFDLElBQUk7Z0JBQ1IsR0FBRyxFQUFDLElBQUk7YUFDWDtZQUNELElBQUksRUFBQztnQkFDRCxHQUFHLEVBQUMsSUFBSTtnQkFDUixHQUFHLEVBQUMsSUFBSTthQUNYO1NBQ0o7UUFDRCxPQUFPLEVBQUMsTUFBTTtRQUNkLEVBQUUsRUFBRSxvQkFBUztRQUNiLFlBQVkseUJBQXFCO0tBQ3hDLENBQUE7SUFDRCxr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Qy9CLEVBQUUsRUFBRyxHQUFHLG1CQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJO29CQUMvQixRQUFRLEVBQUcsRUFBRSxHQUFDLElBQUksR0FBQyxJQUFJO29CQUN2QixNQUFNLEVBQUM7d0JBQ0gsUUFBUSxFQUFFLFdBQVc7d0JBQ3JCLE9BQU8sRUFBRyxFQUFFLEdBQUMsSUFBSTtxQkFDcEI7b0JBQ0QsTUFBTSxFQUFHLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQztpQkFDbkIsQ0FBQyxDQUFDLENBQUE7Z0JBQ0gsSUFBSSxHQUFHLE1BQU0sVUFBVSxDQUFDLGlCQUFpQixDQUFDLElBQUksU0FBUyxDQUFDLGtCQUFrQixDQUFDO29CQUN2RSxJQUFJLHFDQUEyQjtvQkFDL0IsRUFBRSxFQUFHLEdBQUcsbUJBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUk7b0JBQy9CLE1BQU0sRUFBQzt3QkFDSCxRQUFRLEVBQUUsV0FBVzt3QkFDckIsT0FBTyxFQUFHLEVBQUUsR0FBQyxJQUFJO3FCQUNwQjtvQkFDRCxNQUFNLEVBQUcsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDO2lCQUNuQixDQUFDLENBQUMsQ0FBQTtnQkFDSCxNQUFNLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUNsQztTQUNKO0tBQ0o7SUFFRCxNQUFNLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtBQUduQyxDQUFDO0FBbkxELDRCQW1MQyIsImZpbGUiOiJ0YXNrc19iZHRfYmV0YS9Db25uZWN0X0FsbEVQX1R1bm5lbFNlbGVjdC9vbmxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0Vycm9yQ29kZSwgTmV0RW50cnksIE5hbWVzcGFjZSwgQWNjZXNzTmV0VHlwZSwgQnVmZmVyUmVhZGVyLCBMb2dnZXIsIFRhc2tDbGllbnRJbnRlcmZhY2UsIENsaWVudEV4aXRDb2RlLCBCdWZmZXJXcml0ZXIsIFJhbmRvbUdlbmVyYXRvcn0gZnJvbSAnLi4vLi4vYmFzZSc7XHJcbmltcG9ydCB7VGVzdFJ1bm5lcn0gZnJvbSAnLi4vLi4vdGFza1Rvb2xzL2N5ZnNfYmR0L3Rlc3RSdW5uZXInO1xyXG5pbXBvcnQge1Rlc3RjYXNlLFRhc2ssQWN0aW9uVHlwZSxSZXNwX2VwX3R5cGV9IGZyb20gXCIuLi8uLi90YXNrVG9vbHMvY3lmc19iZHQvdHlwZVwiXHJcbmltcG9ydCB7bGFiQWdlbnQsQmR0UGVlckNsaWVudENvbmZpZyxMYWJTbkxpc3R9IGZyb20gXCIuLi8uLi90YXNrVG9vbHMvY3lmc19iZHQvbGFiQWdlbnRcIlxyXG5pbXBvcnQgICogYXMgQkRUQWN0aW9uIGZyb20gXCIuLi8uLi90YXNrVG9vbHMvY3lmc19iZHQvYmR0QWN0aW9uXCJcclxuaW1wb3J0IHtBZ2VudE1hbmFnZXJ9IGZyb20gJy4uLy4uL3Rhc2tUb29scy9jeWZzX2JkdC9hZ2VudE1hbmFnZXInXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gVGFza01haW4oX2ludGVyZmFjZTogVGFza0NsaWVudEludGVyZmFjZSkge1xyXG4gICAgLy8oMSkg6L+e5o6l5rWL6K+V6IqC54K5XHJcbiAgICBsZXQgYWdlbnRNYW5hZ2VyID0gQWdlbnRNYW5hZ2VyLmNyZWF0ZUluc3RhbmNlKF9pbnRlcmZhY2UpO1xyXG4gICAgYXdhaXQgYWdlbnRNYW5hZ2VyLmluaXRBZ2VudExpc3QobGFiQWdlbnQpO1xyXG4gICAgLy8oMikg5Yib5bu65rWL6K+V55So5L6L5omn6KGM5ZmoIFRlc3RSdW5uZXJcclxuICAgIGxldCB0ZXN0UnVubmVyID0gbmV3IFRlc3RSdW5uZXIoX2ludGVyZmFjZSk7XHJcbiAgICBsZXQgdGVzdGNhc2VOYW1lID0gXCJDb25uZWN0X0FsbEVQX1R1bm5lbFNlbGVjdFwiXHJcbiAgICBsZXQgdGVzdGNhc2U6VGVzdGNhc2UgPSB7XHJcbiAgICAgICAgVGVzdGNhc2VOYW1lOiB0ZXN0Y2FzZU5hbWUsXHJcbiAgICAgICAgdGVzdGNhc2VJZDogYCR7dGVzdGNhc2VOYW1lfV8ke0RhdGUubm93KCl9YCxcclxuICAgICAgICByZW1hcms6IGAjIOaTjeS9nOa1geeoi++8mlxcblxyXG4gICAgICAgICsg77yIMe+8iUxOL1JOIOWIneWni+WMluacrOWcsEJEVOWNj+iuruagiFxyXG4gICAgICAgICsg77yIMu+8iUxOIOWQkSBSTiDlj5HotbfpppbmrKHov57mjqXvvIzlj5HpgIExME3lpKflsI9zdHJlYW0g5pWw5o2u77yM5YWz6Zet6L+e5o6lXHJcbiAgICAgICAgKyDvvIgz77yJTE4g5ZCRIFJOIOWPkei1t+S6jOasoei/nuaOpe+8jOWPkemAgTEwTeWkp+Wwj3N0cmVhbSDmlbDmja7vvIzlhbPpl63ov57mjqVcclxuICAgICAgICArIO+8iDTvvIlSTiDlkJEgTE4g5Y+R6LW35Y+N5ZCR6L+e5o6l77yM5Y+R6YCBMTBN5aSn5bCPc3RyZWFtIOaVsOaNru+8jOWFs+mXrei/nuaOpVxyXG4gICAgICAgICsgICg1KSDlhbPpl63miYDmnInov57mjqUgYCxcclxuICAgICAgICBlbnZpcm9ubWVudDogXCJsYWJcIixcclxuICAgIH07XHJcbiAgICBhd2FpdCB0ZXN0UnVubmVyLmluaXRUZXN0Y2FzZSh0ZXN0Y2FzZSk7XHJcbiAgICAvLygzKSDliJvlu7pCRFTmtYvor5XlrqLmiLfnq69cclxuICAgIGxldCBjb25maWcgOiBCZHRQZWVyQ2xpZW50Q29uZmlnID0ge1xyXG4gICAgICAgICAgICBlcHM6e1xyXG4gICAgICAgICAgICAgICAgaXB2NDp7XHJcbiAgICAgICAgICAgICAgICAgICAgdWRwOnRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGNwOnRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaXB2Njp7XHJcbiAgICAgICAgICAgICAgICAgICAgdWRwOnRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGNwOnRydWUsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxvZ1R5cGU6XCJpbmZvXCIsXHJcbiAgICAgICAgICAgIFNOIDpMYWJTbkxpc3QsXHJcbiAgICAgICAgICAgIHJlc3BfZXBfdHlwZTpSZXNwX2VwX3R5cGUuU05fUmVzcCwgXHJcbiAgICB9XHJcbiAgICAvLyDmr4/lj7DmnLrlmajov5DooYzkuIDkuKpiZHQg5a6i5oi356uvXHJcbiAgICBhd2FpdCBhZ2VudE1hbmFnZXIuYWxsQWdlbnRTdGFydEJkdFBlZXIoY29uZmlnKVxyXG4gICAgLy8oNCkg5rWL6K+V55So5L6L5omn6KGM5Zmo5re75Yqg5rWL6K+V5Lu75YqhXHJcbiAgICBcclxuICAgIGZvcihsZXQgaSBpbiBsYWJBZ2VudCl7XHJcbiAgICAgICAgZm9yKGxldCBqIGluIGxhYkFnZW50KXtcclxuICAgICAgICAgICAgaWYoaSAhPSBqICYmIGxhYkFnZW50W2ldLk5BVCArIGxhYkFnZW50W2pdLk5BVCA8IDUgKXtcclxuICAgICAgICAgICAgICAgIGxldCBpbmZvID0gYXdhaXQgdGVzdFJ1bm5lci5jcmVhdGVQcmV2VGFzayh7XHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtpXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBSTiA6IGAke2xhYkFnZW50W2pdLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgOiA1KjMwKjEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uIDogW11cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBpbmZvID0gYXdhaXQgdGVzdFJ1bm5lci5wcmV2VGFza0FkZEFjdGlvbihuZXcgQkRUQWN0aW9uLkNvbm5lY3RBY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBBY3Rpb25UeXBlLmNvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtpXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBSTiA6IGAke2xhYkFnZW50W2pdLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5fdGFnOiBcImNvbm5lY3RfMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0IDogMzAqMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCA6IHtlcnI6MH0sICAgIFxyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICBpbmZvID0gYXdhaXQgdGVzdFJ1bm5lci5wcmV2VGFza0FkZEFjdGlvbihuZXcgQkRUQWN0aW9uLlNlbmRTdHJlYW1BY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBBY3Rpb25UeXBlLnNlbmRfc3RyZWFtLFxyXG4gICAgICAgICAgICAgICAgICAgIExOIDogYCR7bGFiQWdlbnRbaV0udGFnc1swXX0kMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgUk4gOiBgJHtsYWJBZ2VudFtqXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlU2l6ZSA6IDEwKjEwMjQqMTAyNCxcclxuICAgICAgICAgICAgICAgICAgICBjb25maWc6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uX3RhZzogXCJjb25uZWN0XzFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA6IDMwKjEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QgOiB7ZXJyOjB9LCAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICBpbmZvID0gYXdhaXQgdGVzdFJ1bm5lci5wcmV2VGFza0FkZEFjdGlvbihuZXcgQkRUQWN0aW9uLlNlbmRTdHJlYW1BY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBBY3Rpb25UeXBlLnNlbmRfc3RyZWFtX3JldmVyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtqXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBSTiA6IGAke2xhYkFnZW50W2ldLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVTaXplIDogMTAqMTAyNCoxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5fdGFnOiBcImNvbm5lY3RfMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0IDogMzAqMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCA6IHtlcnI6MH0sICAgICAgXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCB0ZXN0UnVubmVyLnByZXZUYXNrQWRkQWN0aW9uKG5ldyBCRFRBY3Rpb24uQ2xvc2VDb25uZWN0QWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlIDogQWN0aW9uVHlwZS5jbG9zZV9jb25uZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIExOIDogYCR7bGFiQWdlbnRbaV0udGFnc1swXX0kMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubl90YWc6IFwiY29ubmVjdF8xXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgOiAzMCoxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0IDoge2VycjowfSwgICAgICBcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgaW5mbyA9IGF3YWl0IHRlc3RSdW5uZXIucHJldlRhc2tBZGRBY3Rpb24obmV3IEJEVEFjdGlvbi5Db25uZWN0QWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlIDogQWN0aW9uVHlwZS5jb25uZWN0X3NlY29uZCxcclxuICAgICAgICAgICAgICAgICAgICBMTiA6IGAke2xhYkFnZW50W2ldLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIFJOIDogYCR7bGFiQWdlbnRbal0udGFnc1swXX0kMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubl90YWc6IFwiY29ubmVjdF8yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgOiAzMCoxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0IDoge2VycjowfSwgICAgXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCB0ZXN0UnVubmVyLnByZXZUYXNrQWRkQWN0aW9uKG5ldyBCRFRBY3Rpb24uU2VuZFN0cmVhbUFjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA6IEFjdGlvblR5cGUuc2VuZF9zdHJlYW0sXHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtpXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBSTiA6IGAke2xhYkFnZW50W2pdLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVTaXplIDogMTAqMTAyNCoxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5fdGFnOiBcImNvbm5lY3RfMlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0IDogMzAqMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCA6IHtlcnI6MH0sICAgICAgXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCB0ZXN0UnVubmVyLnByZXZUYXNrQWRkQWN0aW9uKG5ldyBCRFRBY3Rpb24uU2VuZFN0cmVhbUFjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA6IEFjdGlvblR5cGUuc2VuZF9zdHJlYW1fcmV2ZXJzZSxcclxuICAgICAgICAgICAgICAgICAgICBMTiA6IGAke2xhYkFnZW50W2pdLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIFJOIDogYCR7bGFiQWdlbnRbaV0udGFnc1swXX0kMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZVNpemUgOiAxMCoxMDI0KjEwMjQsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubl90YWc6IFwiY29ubmVjdF8yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgOiAzMCoxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0IDoge2VycjowfSwgICAgICBcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgaW5mbyA9IGF3YWl0IHRlc3RSdW5uZXIucHJldlRhc2tBZGRBY3Rpb24obmV3IEJEVEFjdGlvbi5DbG9zZUNvbm5lY3RBY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBBY3Rpb25UeXBlLmNsb3NlX2Nvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtpXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBjb25maWc6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uX3RhZzogXCJjb25uZWN0XzJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA6IDMwKjEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QgOiB7ZXJyOjB9LCAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSkpIFxyXG4gICAgICAgICAgICAgICAgaW5mbyA9IGF3YWl0IHRlc3RSdW5uZXIucHJldlRhc2tBZGRBY3Rpb24obmV3IEJEVEFjdGlvbi5Db25uZWN0QWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlIDogQWN0aW9uVHlwZS5jb25uZWN0X3JldmVyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtqXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBSTiA6IGAke2xhYkFnZW50W2ldLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5fdGFnOiBcImNvbm5lY3RfM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0IDogMzAqMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCA6IHtlcnI6MH0sICAgIFxyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICBpbmZvID0gYXdhaXQgdGVzdFJ1bm5lci5wcmV2VGFza0FkZEFjdGlvbihuZXcgQkRUQWN0aW9uLlNlbmRTdHJlYW1BY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBBY3Rpb25UeXBlLnNlbmRfc3RyZWFtLFxyXG4gICAgICAgICAgICAgICAgICAgIExOIDogYCR7bGFiQWdlbnRbal0udGFnc1swXX0kMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgUk4gOiBgJHtsYWJBZ2VudFtpXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlU2l6ZSA6IDEwKjEwMjQqMTAyNCxcclxuICAgICAgICAgICAgICAgICAgICBjb25maWc6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uX3RhZzogXCJjb25uZWN0XzNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA6IDMwKjEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QgOiB7ZXJyOjB9LCAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICBpbmZvID0gYXdhaXQgdGVzdFJ1bm5lci5wcmV2VGFza0FkZEFjdGlvbihuZXcgQkRUQWN0aW9uLlNlbmRTdHJlYW1BY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBBY3Rpb25UeXBlLnNlbmRfc3RyZWFtX3JldmVyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgTE4gOiBgJHtsYWJBZ2VudFtpXS50YWdzWzBdfSQxYCxcclxuICAgICAgICAgICAgICAgICAgICBSTiA6IGAke2xhYkFnZW50W2pdLnRhZ3NbMF19JDFgLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVTaXplIDogMTAqMTAyNCoxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5fdGFnOiBcImNvbm5lY3RfM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0IDogMzAqMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCA6IHtlcnI6MH0sICAgICAgXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCB0ZXN0UnVubmVyLnByZXZUYXNrQWRkQWN0aW9uKG5ldyBCRFRBY3Rpb24uQ2xvc2VDb25uZWN0QWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlIDogQWN0aW9uVHlwZS5jbG9zZV9jb25uZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIExOIDogYCR7bGFiQWdlbnRbal0udGFnc1swXX0kMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubl90YWc6IFwiY29ubmVjdF8zXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgOiAzMCoxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0IDoge2VycjowfSwgICAgICBcclxuICAgICAgICAgICAgICAgIH0pKSAgXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0UnVubmVyLnByZXZUYXNrUnVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGVzdFJ1bm5lci53YWl0RmluaXNoZWQoKVxyXG4gICAgXHJcbiAgICBcclxufVxyXG4iXX0=
