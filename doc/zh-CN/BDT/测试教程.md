## 实验室测试环境

+ [实验室机器远程连接方式](../测试环境/实验室测试机连接汇总.md)


## 测试代码

+ Rust 相关的BDT客户端测试代码
  + bdt-tools(已废弃) ：之前第一版bdt测试客户端的代码
  + bdt-cli : BDT 测试的客户端
  + bdt-unittest : BDT 单元测试相关，没有时间实际并没有进行太多
  + bdt-utils : BDT一些操作封装，bdt-cli 和 bdt-unittest 都用其中的桩代码方便进行测试

+ node_tester_app : 测试框架客户端，每个机器上都有部署，目前windows/linux都有配置开机启动
    + service/cyfs_bdt_cli : 运行在每个节点的service
    + testcase_runner/cyfs_bdt_cli : 用例执行的运行器，对一些操作行为的封装
    + testcase : 具体测试用例数据 ，实际调用testcase_runner了行为进行测试 
    + tool/cmd_opt.ts : 命令行工具，可以批量打包用例用的


## 测试框架

+ node-tester-server（振爷开发的）
  + python 服务 ： 目前就一个文件服务器有用
  + agent_master node_tester_app测试节点连接的中心化服务器，用来代理网络请求

+ node-tester-data ：BDT 测试数据统计，testcase_runner运行的所有用例数据会上报这个服务
+ node-tester-web （振爷开发的）：VVue 写的前端页面，可以更新service和用例，可以分发测试用例执行


## 测试客户端和服务端部署

[cyfs_test_lab客户端部署](../实验室测试框架/ops/cyfs_test_lab客户端部署.md)

[cyfs_test_lab服务端部署](../实验室测试框架/ops/cyfs_test_lab服务端部署.md) 

所有的服务端都部署在lab-server机器上

## 测试用例执行

+ 本地调试
```
cd node-tester-app
npm i 
gulp build_app
cd ../../deploy/node_tester_app/host 
node ./host/tool.js
# 用例可能需要用 tool/cmd_opt.ts 工具把用例打包 runTask本地运行的是node-tester-app/tasks下面的用例
runTask("service_id","task_dir_name")
```

+ UI页面 ： http://cyfs-test-lab/  或者 http://192.168.100.205/ 

+ 机器管理 ：查看机器node_tester_app 客户端在线状态
+ 软件包管理 ：可以更新所有节点的service服务
+ 用例管理 ：可以管理上传的用例，建议使用 tool/cmd_opt.ts 工具批量上传
+ 工作计划 ： 可以选择一个service 执行指定的用例列表
+ 执行结果 ：这个目前没有什么用，只是工作计划的执行结果，并不能统计用例实际的执行结果
+ BDT测试报告 : 可以查看测试用例执行后的测试结果统计（后台是node-tester-data）数据库是 "mysql://root:Bucky@0809@192.168.100.205:3306/cyfs_test_lab"

