"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.stringToUint8Array = exports.Uint8ArrayToString = exports.RandomGenerator = void 0;
const assert = require("assert");
const base_1 = require("../../base");
const fs = __importStar(require("fs-extra"));
const path = __importStar(require("path"));
class RandomGenerator {
    static string(length = 32) {
        let maxPos = RandomGenerator.CHAR_SET.length;
        let result = '';
        for (let i = 0; i < length; i++) {
            result += RandomGenerator.CHAR_SET.charAt(RandomGenerator.integer(maxPos));
        }
        if (Buffer.byteLength(result) < length) {
            let accurate_len = length - Buffer.byteLength(result);
            result += RandomGenerator.accurateString(accurate_len);
        }
        return result;
    }
    ;
    static accurateString(length = 32) {
        let maxPos = RandomGenerator.CHAR_SET.length;
        let result = '';
        for (let i = 0; i < length; i++) {
            result += RandomGenerator.CHAR_SET.charAt(RandomGenerator.integer(maxPos));
        }
        while (Buffer.byteLength(result) < length) {
            result += RandomGenerator.CHAR_SET.charAt(RandomGenerator.integer(maxPos));
        }
        return result;
    }
    static integer(max, min = 0) {
        let result = Math.round(Math.random() * (max - min)) + min;
        if (result > max) {
            result = max;
        }
        return result;
    }
    static async createRandomFile(pathDir, name, size) {
        if (!fs.pathExistsSync(pathDir)) {
            fs.mkdirpSync(pathDir);
        }
        let file = path.join(pathDir, name);
        const strRandom = RandomGenerator.string(1000);
        let len = Buffer.byteLength(strRandom, 'utf-8');
        while (size > len) {
            let err = fs.appendFileSync(file, strRandom);
            size = size - len;
        }
        fs.appendFileSync(file, RandomGenerator.string(size));
        assert(fs.pathExistsSync(file), `创建文件${path} 失败`);
    }
    static async createRandomDir(root, dirNumber, fileNumber, fileSize, deep = 1) {
        if (!fs.pathExistsSync(root)) {
            fs.mkdirpSync(root);
        }
        let dir_map = [];
        console.info(`开始生成随机文件名列表`);
        let list = [];
        for (let i = 0; i < fileNumber; i++) {
            let file_name = `${RandomGenerator.string(10)}.txt`;
            dir_map.push(file_name);
            list.push(RandomGenerator.createRandomFile(root, file_name, fileSize));
            await base_1.sleep(100);
        }
        for (let i in list) {
            await list[i];
        }
        return dir_map;
    }
}
exports.RandomGenerator = RandomGenerator;
// 默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1
RandomGenerator.CHAR_SET = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789'; //0123456789
;
function Uint8ArrayToString(fileData) {
    var dataString = "";
    for (var i = 0; i < fileData.length; i++) {
        dataString += String.fromCharCode(fileData[i]);
    }
    return dataString;
}
exports.Uint8ArrayToString = Uint8ArrayToString;
function stringToUint8Array(str) {
    var arr = [];
    for (var i = 0, j = str.length; i < j; ++i) {
        arr.push(str.charCodeAt(i));
    }
    var tmpUint8Array = new Uint8Array(arr);
    return tmpUint8Array;
}
exports.stringToUint8Array = stringToUint8Array;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ub2RlLXRlc3Rlci1hcHAvc2VydmljZS9jeWZzX2JkdC9nZW5lcmF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGlDQUFrQztBQUNsQyxxQ0FBaUM7QUFDakMsNkNBQStCO0FBQy9CLDJDQUE2QjtBQUs3QixNQUFhLGVBQWU7SUFJeEIsTUFBTSxDQUFFLE1BQU0sQ0FBQyxTQUFpQixFQUFFO1FBQzlCLElBQUksTUFBTSxHQUFHLGVBQWUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQzdDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzdCLE1BQU0sSUFBSSxlQUFlLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7U0FDOUU7UUFDRCxJQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUMsTUFBTSxFQUFDO1lBQ2hDLElBQUksWUFBWSxHQUFHLE1BQU0sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RELE1BQU0sSUFBSSxlQUFlLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1NBQzFEO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUFBLENBQUM7SUFFRixNQUFNLENBQUMsY0FBYyxDQUFDLFNBQWlCLEVBQUU7UUFDckMsSUFBSSxNQUFNLEdBQUcsZUFBZSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDN0MsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDN0IsTUFBTSxJQUFJ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QyxDQUFDLENBQUMsQ0FBQTtTQUNoQjtRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ25CLENBQUM7O0FBckVMLDBDQXVFQztBQXRFRyxnQ0FBZ0M7QUFDekIsd0JBQVEsR0FBVSxxREFBcUQsQ0FBQyxDQUFDLFlBQVk7QUFxRS9GLENBQUM7QUFFRixTQUFnQixrQkFBa0IsQ0FBQyxRQUFtQjtJQUNsRCxJQUFJLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDcEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDeEMsVUFBVSxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEQ7SUFFRCxPQUFPLFVBQVUsQ0FBQTtBQUNuQixDQUFDO0FBUEgsZ0RBT0c7QUFHSCxTQUFnQixrQkFBa0IsQ0FBQyxHQUFVO0lBQ3pDLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNiLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7UUFDMUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDN0I7SUFFRCxJQUFJLGFBQWEsR0FBRyxJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QyxPQUFPLGFBQWEsQ0FBQTtBQUN4QixDQUFDO0FBUkQsZ0RBUUMiLCJmaWxlIjoic2VydmljZS9jeWZzX2JkdC9nZW5lcmF0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7IFxyXG5pbXBvcnQge3NsZWVwfSBmcm9tICcuLi8uLi9iYXNlJztcclxuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzLWV4dHJhXCI7XHJcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBSYW5kb21HZW5lcmF0b3Ige1xyXG4gICAgLy8g6buY6K6k5Y675o6J5LqG5a655piT5re35reG55qE5a2X56ymb09MbCw5Z3EsVnYsVXUsSTFcclxuICAgIHN0YXRpYyBDSEFSX1NFVDpzdHJpbmcgPSAnQUJDREVGR0hKS01OUFFSU1RXWFlaYWJjZGVmaGlqa21ucHJzdHd4eXowMTIzNDU2Nzg5JzsgLy8wMTIzNDU2Nzg5XHJcblxyXG4gICAgc3RhdGljICBzdHJpbmcobGVuZ3RoOiBudW1iZXIgPSAzMikge1xyXG4gICAgICAgIGxldCBtYXhQb3MgPSBSYW5kb21HZW5lcmF0b3IuQ0hBUl9TRVQubGVuZ3RoO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSBSYW5kb21HZW5lcmF0b3IuQ0hBUl9TRVQuY2hhckF0KFJhbmRvbUdlbmVyYXRvci5pbnRlZ2VyKG1heFBvcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihCdWZmZXIuYnl0ZUxlbmd0aChyZXN1bHQpPGxlbmd0aCl7XHJcbiAgICAgICAgICAgIGxldCBhY2N1cmF0ZV9sZW4gPSBsZW5ndGggLSBCdWZmZXIuYnl0ZUxlbmd0aChyZXN1bHQpO1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gUmFuZG9tR2VuZXJhdG9yLmFjY3VyYXRlU3RyaW5nKGFjY3VyYXRlX2xlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBzdGF0aWMgYWNjdXJhdGVTdHJpbmcobGVuZ3RoOiBudW1iZXIgPSAzMil7XHJcbiAgICAgICAgbGV0IG1heFBvcyA9IFJhbmRvbUdlbmVyYXRvci5DSEFSX1NFVC5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IFJhbmRvbUdlbmVyYXRvci5DSEFSX1NFVC5jaGFyQXQoUmFuZG9tR2VuZXJhdG9yLmludGVnZXIobWF4UG9zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlKEJ1ZmZlci5ieXRlTGVuZ3RoKHJlc3VsdCk8bGVuZ3RoKXtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IFJhbmRvbUdlbmVyYXRvci5DSEFSX1NFVC5jaGFyQXQoUmFuZG9tR2VuZXJhdG9yLmludGVnZXIobWF4UG9zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGludGVnZXIobWF4OiBudW1iZXIsIG1pbjogbnVtYmVyID0gMCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgaWYgKHJlc3VsdCA+IG1heCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBtYXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlUmFuZG9tRmlsZShwYXRoRGlyOnN0cmluZyxuYW1lOnN0cmluZyxzaXplOm51bWJlcikge1xyXG4gICAgICAgIGlmKCFmcy5wYXRoRXhpc3RzU3luYyhwYXRoRGlyKSl7XHJcbiAgICAgICAgICAgIGZzLm1rZGlycFN5bmMocGF0aERpcilcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZpbGUgID0gcGF0aC5qb2luKHBhdGhEaXIsbmFtZSlcclxuICAgICAgICBjb25zdCBzdHJSYW5kb20gPSBSYW5kb21HZW5lcmF0b3Iuc3RyaW5nKDEwMDApO1xyXG4gICAgICAgIGxldCBsZW4gPSAgQnVmZmVyLmJ5dGVMZW5ndGgoc3RyUmFuZG9tLCd1dGYtOCcpO1xyXG4gICAgICAgIHdoaWxlKHNpemU+bGVuKXtcclxuICAgICAgICAgICAgbGV0IGVyciA9IGZzLmFwcGVuZEZpbGVTeW5jKGZpbGUsc3RyUmFuZG9tKTtcclxuICAgICAgICAgICAgc2l6ZSA9IHNpemUgLSBsZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKGZpbGUsUmFuZG9tR2VuZXJhdG9yLnN0cmluZyhzaXplKSk7XHJcbiAgICAgICAgYXNzZXJ0KGZzLnBhdGhFeGlzdHNTeW5jKGZpbGUpLGDliJvlu7rmlofku7Yke3BhdGh9IOWksei0pWApXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVJhbmRvbURpcihyb290OnN0cmluZyxkaXJOdW1iZXI6bnVtYmVyLGZpbGVOdW1iZXI6bnVtYmVyLGZpbGVTaXplOm51bWJlcixkZWVwOm51bWJlcj0xKXtcclxuICAgICAgICBpZighZnMucGF0aEV4aXN0c1N5bmMocm9vdCkpe1xyXG4gICAgICAgICAgICBmcy5ta2RpcnBTeW5jKHJvb3QpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkaXJfbWFwID0gW107XHJcbiAgICAgICAgY29uc29sZS5pbmZvKGDlvIDlp4vnlJ/miJDpmo/mnLrmlofku7blkI3liJfooahgKVxyXG4gICAgICAgIGxldCBsaXN0IDogQXJyYXk8YW55PiA9IFtdXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpIDwgZmlsZU51bWJlcjtpKyspe1xyXG4gICAgICAgICAgICBsZXQgZmlsZV9uYW1lID0gYCR7UmFuZG9tR2VuZXJhdG9yLnN0cmluZygxMCl9LnR4dGA7XHJcbiAgICAgICAgICAgIGRpcl9tYXAucHVzaChmaWxlX25hbWUpO1xyXG4gICAgICAgICAgICBsaXN0LnB1c2goUmFuZG9tR2VuZXJhdG9yLmNyZWF0ZVJhbmRvbUZpbGUocm9vdCxmaWxlX25hbWUsZmlsZVNpemUpKVxyXG4gICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgaW4gbGlzdCl7XHJcbiAgICAgICAgICAgIGF3YWl0IGxpc3RbaV1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpcl9tYXA7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFVpbnQ4QXJyYXlUb1N0cmluZyhmaWxlRGF0YTpVaW50OEFycmF5KXtcclxuICAgIHZhciBkYXRhU3RyaW5nID0gXCJcIjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgZGF0YVN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGZpbGVEYXRhW2ldKTtcclxuICAgIH1cclxuICAgXHJcbiAgICByZXR1cm4gZGF0YVN0cmluZ1xyXG4gIH1cclxuICBcclxuICBcclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvVWludDhBcnJheShzdHI6c3RyaW5nKXtcclxuICAgIHZhciBhcnIgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBqID0gc3RyLmxlbmd0aDsgaSA8IGo7ICsraSkge1xyXG4gICAgICBhcnIucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgdmFyIHRtcFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShhcnIpO1xyXG4gICAgcmV0dXJuIHRtcFVpbnQ4QXJyYXlcclxufVxyXG5cclxuIl19
